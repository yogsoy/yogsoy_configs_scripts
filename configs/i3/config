# vim: filetype=i3

### Definition

set $mod Mod4
set $TERM urxvt
set $BROWSER google-chrome

### Settings

# system font (title bars, status bar, etc.)
font pango:Share Tech Mono Regular 10

# colours
client.focused #d70a53 #d70a53 #ffffff #8c0333
client.focused_inactive #333333 #333333 #888888 #333333
client.unfocused #333333 #333333 #888888 #333333
client.urgent #eb709b #eb709b #ffffff #eb709b

# workspace names (1-10 atm)
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# workspace monitors
workspace $ws1 output eDP1
workspace $ws2 output DP1-1
workspace $ws3 output DP1-1

# status bar
bar {
	tray_output primary
	tray_padding 1
	status_command i3blocks
	colors {
		separator #444444
		background #222222
		statusline #ffffff
		focused_workspace #d70a53 #d70a53 #ffffff #1d1f21
		active_workspace #333333 #333333 #888888 #ffffff
		inactive_workspace #333333 #333333 #888888 #969896
		urgent_workspace #eb709b #eb709b #ffffff #ffffff
	}
}

# window focus settings (works?)
no_focus [title="Discord"]
no_focus [window_role="browser"]
focus_on_window_activation focus
focus_follows_mouse no

# window borders
# make all borders 1px
default_border normal 1
# not show borders on edges
hide_edge_borders both

# auto-move windows
for_window [window_role="browser"] move container to workspace $ws2
for_window [title="Discord"] move container to workspace $ws3

### Startup

##fixes

# automatically make monitor happen
exec "~/scripts/extdisp.sh"

## daemons
# screenshots
exec --no-startup-id flameshot
# IME
exec --no-startup-id fcitx -d
# window transparency
exec --no-startup-id compton
# wallpaper
exec --no-startup-id "feh --bg-center ~/Pictures/blindofficial\ logo\ bg.jpg"
# notifications
exec --no-startup-id dunst -markup full
# kdeconnect indicator (remote control, notifications, etc.)
exec --no-startup-id kdeconnect-indicator
# bluetooth (GUI)
exec --no-startup-id blueman-applet
# wifi (what)
exec --no-startup-id nm-applet

## programs
exec $TERM
# role=browser is a chrome option, check this if you change browser
exec $BROWSER --role=browser
exec discord-canary

### Keybinds

## i3

# kill window
bindsym $mod+q kill

# make window floating
bindsym $mod+Shift+space floating toggle

# focusing
bindsym $mod+Left focus left
bindsym $mod+Shift+Tab focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right
bindsym $mod+Tab focus right

# move window
bindsym $mod+Shift+Left move left 15px
bindsym $mod+Shift+Down move down 15px
bindsym $mod+Shift+Up move up 15px
bindsym $mod+Shift+Right move right 15px

# splits
bindsym $mod+h split h
bindsym $mod+v split v
# toggle split direction
bindsym $mod+e layout toggle split

# fullscreen
bindsym $mod+f fullscreen toggle

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10
bindsym mod2+KP_1 workspace $ws1
bindsym mod2+KP_2 workspace $ws2
bindsym mod2+KP_3 workspace $ws3
bindsym mod2+KP_4 workspace $ws4
bindsym mod2+KP_5 workspace $ws5
bindsym mod2+KP_6 workspace $ws6
bindsym mod2+KP_7 workspace $ws7
bindsym mod2+KP_8 workspace $ws8
bindsym mod2+KP_9 workspace $ws9
bindsym mod2+KP_0 workspace $ws10


# move container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# i3 control
# reload config
bindsym $mod+Shift+c reload
# restart i3
bindsym $mod+Shift+r restart
# exit i3 (logout)
bindsym $mod+Shift+l exit
# lock screen (?)
bindsym $mod+l exec dm-tool lock

# resize mode
bindsym $mod+r mode "resize"
mode "resize" {
	bindsym Left resize shrink width 30 px or 2 ppt
	bindsym Shift+Left resize shrink width 60 px or 4 ppt
	bindsym Down resize grow height 30 px or 2 ppt
	bindsym Shift+Down resize grow height 60 px or 4 ppt
	bindsym Up resize shrink height 30 px or 2 ppt
	bindsym Shift+Up resize shrink height 60 px or 4 ppt
	bindsym Right resize grow width 30 px or 2 ppt
	bindsym Shift+Right resize grow width 60 px or 4 ppt

	bindsym Escape mode "default"
	bindsym $mod+r mode "default"

}

## Scripts and Programs

# open terminal
bindsym $mod+Return exec $TERM

# dmenu (but good - runs things in bash)
bindsym $mod+d exec ~/scripts/go.sh

# scripts
bindsym $mod+t exec ~/scripts/speak_time.sh
#bindsym $mod+Shift+t exec ~/scripts/speak_time_12.sh
bindsym $mod+Shift+t exec ~/scripts/speak_date.sh
bindsym $mod+b exec ~/scripts/speak_battery.sh
bindsym $mod+w exec ~/scripts/wiktionary_selection.sh
bindsym $mod+s exec ~/scripts/speak_selection.sh
bindsym $mod+Shift+d exec ~/scripts/date_to_clipboard.sh
bindsym $mod+Shift+m exec ~/scripts/extdisp.sh

## Hotkeys

# volume
bindsym XF86AudioRaiseVolume exec "pamixer --allow-boost -i 1; pkill i3blocks -RTMIN+2"
bindsym Shift+XF86AudioRaiseVolume exec "pamixer --allow-boost -i 5; pkill i3blocks -RTMIN+2"
bindsym XF86AudioLowerVolume exec "pamixer --allow-boost -d 1; pkill i3blocks -RTMIN+2"
bindsym Shift+XF86AudioLowerVolume exec "pamixer --allow-boost -d 5; pkill i3blocks -RTMIN+2"
bindsym XF86AudioMute exec "pamixer --allow-boost -t; pkill i3blocks -RTMIN+2"
bindsym Shift+XF86AudioMute exec "pamixer --set-volume 100; pkill i3blocks -RTMIN+2"

# media
bindsym XF86AudioPlay exec "playerctl -a play-pause; pkill i3blocks -RTMIN+4"
bindsym XF86AudioNext exec "playerctl -a next; pkill i3blocks -RTMIN+4"
bindsym XF86AudioPrev exec "playerctl -a previous; pkill i3blocks -RTMIN+4"

# brightness
bindsym XF86MonBrightnessUp exec "xbacklight -inc 5; pkill i3blocks -RTMIN+5"
bindsym Shift+XF86MonBrightnessUp exec "xbacklight -inc 20; pkill i3blocks -RTMIN+5"
bindsym XF86MonBrightnessDown exec "xbacklight -dec 5; pkill i3blocks -RTMIN+5"
bindsym Shift+XF86MonBrightnessDown exec "xbacklight -dec 20; pkill i3blocks -RTMIN+5"

# screenshots
bindsym Control+F11 exec "flameshot full -c"
bindsym Control+Shift+F11 exec "flameshot gui"
